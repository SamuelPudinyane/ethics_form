<!-- register.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Register | JBS Ethics Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/login.css">
</head>

<body>

  <!-- Include layout.html navbar -->
  <header class="navbar">
    <div class="nav-content">
      <img src="img/image.png" alt="UJ JBS Logo" class="logo uj">
      <span class="nav-title">Ethics Application System</span>
    </div>
  </header>

  <!-- Page-specific content -->
  <main class="main-content">
    <h2 class="centered-text">Register</h2>
    <p id="message" style="color: red;"></p>
    <form action="#" id="registerForm">
      <input id="full-name" type="text" placeholder="Enter Full Name" required>
      <input id="student-number" type="text" placeholder="Enter Student Number" required>
      <input id="email" type="email" placeholder="Enter UJ Email" required>
      <input id="password" type="password" placeholder="Create password" required>

      <h4 class="centered-text">Supervisor Details</h4>
      <label for="supervisors">Choose supervisor from list:</label>
      <select id="supervisors" name="supervisors" required>
        <option value="" disabled selected>-- Click to select --</option>
      </select>
      <input id="sup-email" type="email" placeholder="Supervisor Email" required disabled>

      <a href="login.html" class="btn-link">
        <button type="button">Register</button>
      </a>
      
    </form>
    <p class="switch-link">Already have an account? <a href="login.html">Login</a></p>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 Johannesburg Business School | University of Johannesburg</p>
  </footer>

  <script>
window.addEventListener('DOMContentLoaded', function () {
  // âœ… Dummy list of supervisors
  const dummySupervisors = [
    { user_id: "sup001", full_name: "Prof. Lerato Mokoena", email: "lmokoena@uj.ac.za" },
    { user_id: "sup002", full_name: "Dr. John Naidoo", email: "jnaidoo@uj.ac.za" },
    { user_id: "sup003", full_name: "Ms. Zanele Dlamini", email: "zdlamini@uj.ac.za" }
  ];

  function loadSupervisors() {
    const select = document.getElementById('supervisors');
    select.length = 1; // keep placeholder
    dummySupervisors.forEach(sup => {
      const option = document.createElement('option');
      option.value = sup.user_id;
      option.textContent = sup.full_name;
      option.setAttribute('data-email', sup.email);
      select.appendChild(option);
    });
  }

  document.getElementById('supervisors').addEventListener('change', function () {
    const selected = this.options[this.selectedIndex];
    const email = selected.getAttribute('data-email') || '';
    document.getElementById('sup-email').value = email;
  });

  document.getElementById('email').addEventListener('input', function () {
    const message = document.getElementById('message');
    const email = this.value;
    if (!email.endsWith('@uj.ac.za')) {
      message.textContent = 'Only UJ email addresses are allowed.';
    } else {
      message.textContent = '';
    }
  });

  document.getElementById('registerForm').addEventListener('submit', function (e) {
    e.preventDefault();
    const full_name = document.getElementById('full-name').value;
    const student_number = document.getElementById('student-number').value;
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;
    const supervisor_id = document.getElementById('supervisors').value;

    if (!email.endsWith('@uj.ac.za')) {
      document.getElementById('message').textContent = 'Only UJ email addresses are allowed.';
      return;
    }

    alert('Registered successfully! Redirecting to login...');
    window.location.href = 'login.html';
  });

  loadSupervisors();
});

  </script>
  
</body>

</html>